<Window x:Class="StickerPlugin.winStickerSetting"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="表情包插件设置" Height="600" Width="500"
        MinHeight="450" MinWidth="400"
        WindowStartupLocation="CenterScreen"
        Background="#FF2D2D30"
        ResizeMode="CanResizeWithGrip">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- 服务配置标题 -->
            <TextBlock Grid.Row="0" Text="服务配置" 
                       Foreground="White" FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

            <!-- 使用内置凭证 -->
            <StackPanel Grid.Row="1" Margin="0,0,0,10">
                <CheckBox x:Name="chkUseBuiltInCredentials" Content="使用内置 API 凭证（推荐）" 
                          Foreground="White" FontSize="12" Margin="0,0,0,5"
                          Checked="chkUseBuiltInCredentials_Changed" Unchecked="chkUseBuiltInCredentials_Changed"/>
                <TextBlock Text="使用预配置的 API 服务，无需额外设置" 
                           Foreground="#FF666666" FontSize="11" Margin="20,0,0,10"/>
                
                <!-- 自定义凭证面板 -->
                <StackPanel x:Name="pnlCustomCredentials" Margin="0,5,0,0">
                    <!-- 服务地址 -->
                    <TextBlock Text="服务地址:" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="txtServiceUrl" Grid.Column="0" Height="28" 
                                 Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                                 BorderBrush="#FF555555" Padding="5,3"/>
                        <Button x:Name="btnTestConnection" Grid.Column="1" Content="测试连接" 
                                Width="80" Height="28" Margin="10,0,0,0"
                                Click="btnTestConnection_Click"
                                Background="#FF555555" Foreground="White" BorderThickness="0"/>
                    </Grid>

                    <!-- API Key -->
                    <TextBlock Text="API Key:" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                    <PasswordBox x:Name="txtApiKey" Height="28" 
                                 Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                                 BorderBrush="#FF555555" Padding="5,3"/>
                </StackPanel>
            </StackPanel>

            <!-- 标签配置标题 -->
            <TextBlock Grid.Row="3" Text="标签配置" 
                       Foreground="White" FontSize="14" FontWeight="Bold" Margin="0,10,0,15"/>

            <!-- 标签数量和缓存时长 -->
            <Grid Grid.Row="4" Margin="0,0,0,15">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="释放标签数量:" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtTagCount" Height="28" 
                             Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                             BorderBrush="#FF555555" Padding="5,3"/>
                    <TextBlock Text="范围: 1-100" Foreground="#FF666666" FontSize="11" Margin="0,3,0,0"/>
                </StackPanel>
                
                <StackPanel Grid.Column="1" Margin="10,0,0,0">
                    <TextBlock Text="缓存时长 (分钟):" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtCacheDuration" Height="28" 
                             Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                             BorderBrush="#FF555555" Padding="5,3"/>
                </StackPanel>
            </Grid>

            <!-- 显示配置标题 -->
            <TextBlock Grid.Row="5" Text="显示配置" 
                       Foreground="White" FontSize="14" FontWeight="Bold" Margin="0,10,0,15"/>

            <!-- 显示时长 -->
            <StackPanel Grid.Row="6" Margin="0,0,0,10">
                <TextBlock Text="显示时长 (秒):" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                <TextBox x:Name="txtDisplayDuration" Height="28" Width="150" HorizontalAlignment="Left"
                         Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                         BorderBrush="#FF555555" Padding="5,3"/>
                <TextBlock Text="范围: 1-60" Foreground="#FF666666" FontSize="11" Margin="0,3,0,0"/>
            </StackPanel>
            
            <!-- DLL 路径 -->
            <StackPanel Grid.Row="7" Margin="0,0,0,10">
                <TextBlock Text="表情包插件 DLL 路径:" Foreground="#FFAAAAAA" FontSize="12" Margin="0,0,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="txtDllPath" Grid.Column="0" Height="28" 
                             Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                             BorderBrush="#FF555555" Padding="5,3"/>
                    <Button x:Name="btnBrowse" Grid.Column="1" Content="浏览..." 
                            Width="60" Height="28" Margin="10,0,0,0"
                            Click="btnBrowse_Click"
                            Background="#FF555555" Foreground="White" BorderThickness="0"/>
                </Grid>
                <TextBlock Text="VPet.Plugin.Imgae.dll 的完整路径（留空自动查找）" Foreground="#FF666666" FontSize="11" Margin="0,3,0,0"/>
                
                <!-- 测试发送表情 -->
                <TextBlock Text="测试功能" Foreground="White" FontSize="14" FontWeight="Bold" Margin="0,20,0,15"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="txtTestTags" Grid.Column="0" Height="28" 
                             Background="#FF3C3C3C" Foreground="White" BorderThickness="1"
                             BorderBrush="#FF555555" Padding="5,3" Text="可爱, 开心"/>
                    <Button x:Name="btnTestSticker" Grid.Column="1" Content="测试发送" 
                            Width="80" Height="28" Margin="10,0,0,0"
                            Click="btnTestSticker_Click"
                            Background="#FF28A745" Foreground="White" BorderThickness="0"/>
                </Grid>
                <TextBlock Text="输入标签测试搜索并显示表情包" Foreground="#FF666666" FontSize="11" Margin="0,3,0,0"/>
                <TextBlock x:Name="txtTestResult" Text="" Foreground="#FFAAAAAA" FontSize="11" Margin="0,5,0,0" TextWrapping="Wrap"/>
                
                <!-- 按钮 -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,25,0,10">
                    <Button x:Name="btnSave" Content="保存" Width="80" Height="30" 
                            Margin="0,0,10,0" Click="btnSave_Click"
                            Background="#FF0078D4" Foreground="White" BorderThickness="0"/>
                    <Button x:Name="btnCancel" Content="取消" Width="80" Height="30" 
                            Click="btnCancel_Click"
                            Background="#FF3C3C3C" Foreground="White" BorderThickness="0"/>
                </StackPanel>
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Window>
